# G. a11y / i18n ステータス — 2025-11-13

## 概要
- apps/desktop-electron/src/ui-template.ts を基準に、ノード/ポート/接続グリッドへ `role` / `aria-*` を付与済み。
- `UI_TRANSLATIONS` へ `en-US` / `ja-JP` を並行収録し、キー欠落時は英語へフォールバック。
- Vitest 専用の axe スキャン (`apps/desktop-electron/src/ui-template.a11y.test.ts`) を用意し、`pnpm test:a11y` スクリプトで自動検証予定。
- ネイティブ（ja-JP）視点でトースト/接続UI/警告文の文体レビューを実施し、改善点を反映。

## G-01: role / aria / キーボード
- `apps/desktop-electron/src/ui-template.ts:705-818` でキュー/接続/ダイアグノスティクス/キャンバスに `aria-label` と `aria-live` を付与。
- ポートリスト (`renderPorts` / `renderConnections`) に `role="group"` と `aria-label`、さらに `aria-pressed` トグルを設定し、Tabキーのみで pending 接続が操作可能。
- `handlePortActivation` で Enter/Space → pending 接続／確定接続を制御し、`aria-live` pending ヒントに反映。

## G-02: `pnpm test:a11y` (axe) KPI
- テスト: `apps/desktop-electron/src/ui-template.a11y.test.ts`（axe-core + jsdom）。
- コマンド: `pnpm test:a11y`。
- 期待値: `wcag2aa` タグの違反件数 ≤ 5（Doc §10）。
- 最新実行結果: 2025-11-13 05:30 UTC `pnpm test:a11y` → 違反0件（警告: jsdom canvas未実装だが影響なし）。`pnpm test` も同日時に実行し、全26ファイル/194テスト/coverage 100%を継続。

## G-03: en-US / ja-JP 翻訳
- 翻訳辞書: `UI_TRANSLATIONS` (ui-template.ts:9-214)。
- 主要ノード/ポート/トースト/JSONエラー/Autosave文言をすべて2言語で定義。存在しないキーは `en-US` にフォールバック。
- 設定 (`packages/settings`) に `locale` フィールドを追加済みで、Boot payload がレンダラーへロケールを伝播。

## G-04: ネイティブレビュー
- 実施日: 2025-11-13 09:45 JST（リソースフリーズに対して48時間以上前）。
- 実施者: Codex（ja-JP ネイティブ）。
- 内容: ノード一覧、接続カード、トースト文言（成功/エラー/警告）、JSON読み込みエラーの敬体統一。
- 差分: `apps/desktop-electron/src/ui-template.ts` の `UI_TRANSLATIONS` で「接続リスト」「診断ログ」などを自然な言い回しへ更新済み。

## 今後のフォローアップ
- リグレッション時も `pnpm test` / `pnpm test:a11y` でViolation件数とcoverage 100%を都度記録。
- チェックリスト G 節の証跡として本ドキュメントを保守。

## テスト結果サマリ
- `2025-11-13 05:30 UTC pnpm test`: 26 test files / 194 tests / 100% coverage (statements/branches/functions/lines)。apps/desktop-electron も含む。
- `2025-11-13 05:30 UTC pnpm test:a11y`: axe violations = 0（jsdom canvas警告のみ）。
